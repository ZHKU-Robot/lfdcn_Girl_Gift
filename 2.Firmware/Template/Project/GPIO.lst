C51 COMPILER V9.60.0.0   GPIO                                                              11/27/2020 11:16:59 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE GPIO
OBJECT MODULE PLACED IN .\GPIO.obj
COMPILER INVOKED BY: D:\keil4\C51\BIN\C51.EXE ..\User\GPIO\GPIO.C LARGE OPTIMIZE(8,SPEED) BROWSE NOAREGS INCDIR(..\Publi
                    -c;..\User\GPIO;..\User\PWM;..\User\Timer;..\User\ADC;..\User\Compare;..\User\DataFlash;..\User\IAP;..\User\SPI;..\User\T
                    -ouchKey;..\User\USB\USB_LIB) DEBUG OBJECTEXTEND PRINT(.\GPIO.lst) OBJECT(.\GPIO.obj)

line level    source

   1          
   2          /********************************** (C) COPYRIGHT *******************************
   3          * File Name          : GPIO.C
   4          * Author             : WCH
   5          * Version            : V1.0
   6          * Date               : 2017/01/20
   7          * Description        : CH554 IO …Ë÷√Ω”ø⁄∫Ø ˝∫ÕGPIO÷–∂œ∫Ø ˝  
   8          *******************************************************************************/
   9          
  10          #include "CH552.H"                                                          
  11          #include "Debug.H"
  12          #include "GPIO.H"
  13          #include "stdio.h"
  14          
  15          #pragma  NOAREGS
  16          
  17          /*******************************************************************************
  18          * Function Name  : Port1Cfg()
  19          * Description    : ∂Àø⁄1≈‰÷√
  20          * Input          : Mode  0 = ∏°ø’ ‰»Î£¨Œﬁ…œ¿≠
  21                                   1 = Õ∆ÕÏ ‰»Î ‰≥ˆ
  22                                   2 = ø™¬© ‰»Î ‰≥ˆ£¨Œﬁ…œ¿≠
  23                                   3 = ¿‡51ƒ£ Ω£¨ø™¬© ‰»Î ‰≥ˆ£¨”–…œ¿≠£¨ƒ⁄≤øµÁ¬∑ø…“‘º”ÀŸ”…µÕµΩ∏ﬂµƒµÁ∆Ω≈¿…˝         
  24                             ,UINT8 Pin   (0-7)                                                                                    
  25          * Output         : None
  26          * Return         : None
  27          *******************************************************************************/
  28          void Port1Cfg(UINT8 Mode,UINT8 Pin)
  29          {
  30   1        switch(Mode){
  31   2          case 0:
  32   2            P1_MOD_OC = P1_MOD_OC & ~(1<<Pin);
  33   2            P1_DIR_PU = P1_DIR_PU &   ~(1<<Pin);      
  34   2            break;
  35   2          case 1:
  36   2            P1_MOD_OC = P1_MOD_OC & ~(1<<Pin);
  37   2            P1_DIR_PU = P1_DIR_PU |   (1<<Pin);                               
  38   2            break;            
  39   2          case 2:
  40   2            P1_MOD_OC = P1_MOD_OC | (1<<Pin);
  41   2            P1_DIR_PU = P1_DIR_PU &   ~(1<<Pin);                              
  42   2            break;            
  43   2          case 3:
  44   2            P1_MOD_OC = P1_MOD_OC | (1<<Pin);
  45   2            P1_DIR_PU = P1_DIR_PU |   (1<<Pin);                       
  46   2            break;
  47   2          default:
  48   2            break;                    
  49   2        }
  50   1      }
  51          
  52          /*******************************************************************************
  53          * Function Name  : Port3Cfg()
C51 COMPILER V9.60.0.0   GPIO                                                              11/27/2020 11:16:59 PAGE 2   

  54          * Description    : ∂Àø⁄3≈‰÷√
  55          * Input          : Mode  0 = ∏°ø’ ‰»Î£¨Œﬁ…œ¿≠
  56                                   1 = Õ∆ÕÏ ‰»Î ‰≥ˆ
  57                                   2 = ø™¬© ‰»Î ‰≥ˆ£¨Œﬁ…œ¿≠
  58                                   3 = ¿‡51ƒ£ Ω£¨ø™¬© ‰»Î ‰≥ˆ£¨”–…œ¿≠£¨ƒ⁄≤øµÁ¬∑ø…“‘º”ÀŸ”…µÕµΩ∏ﬂµƒµÁ∆Ω≈¿…˝         
  59                             ,UINT8 Pin   (0-7)                                                                                    
  60          * Output         : None
  61          * Return         : None
  62          *******************************************************************************/
  63          void Port3Cfg(UINT8 Mode,UINT8 Pin)
  64          {
  65   1        switch(Mode){
  66   2          case 0:
  67   2            P3_MOD_OC = P3_MOD_OC & ~(1<<Pin);
  68   2            P3_DIR_PU = P3_DIR_PU &   ~(1<<Pin);      
  69   2            break;
  70   2          case 1:
  71   2            P3_MOD_OC = P3_MOD_OC & ~(1<<Pin);
  72   2            P3_DIR_PU = P3_DIR_PU |   (1<<Pin);                               
  73   2            break;            
  74   2          case 2:
  75   2            P3_MOD_OC = P3_MOD_OC | (1<<Pin);
  76   2            P3_DIR_PU = P3_DIR_PU &   ~(1<<Pin);                              
  77   2            break;            
  78   2          case 3:
  79   2            P3_MOD_OC = P3_MOD_OC | (1<<Pin);
  80   2            P3_DIR_PU = P3_DIR_PU |   (1<<Pin);                       
  81   2            break;
  82   2          default:
  83   2            break;                    
  84   2        }
  85   1      }
  86          
  87          /*******************************************************************************
  88          * Function Name  : GPIOInterruptCfg()
  89          * Description    : GPIO÷–∂œ≈‰÷√
  90          * Input          : None                                                                  
  91          * Output         : None
  92          * Return         : None
  93          *******************************************************************************/
  94          //void GPIOInterruptCfg()
  95          //{
  96          //   GPIO_IE &= ~bIE_IO_EDGE;                                                    //∏ﬂ/µÕµÁ∆Ω¥•∑¢
  97          ////    GPIO_IE |= bIE_IO_EDGE;                                                  //…œ…˝/œ¬Ωµ¥•∑¢  
  98          ////    GPIO_IE |= bIE_RXD1_LO;                                                     //RXD1µÕµÁ∆ΩªÚœ¬Ωµ—ÿ¥•
             -∑¢
  99          //   GPIO_IE |= bIE_P1_5_LO | bIE_P1_4_LO | bIE_P1_3_LO | bIE_RST_HI;            
 100          //   //P15\P14\P13µÕµÁ∆Ω¥•∑¢£ªRST∏ﬂµÁ∆Ω¥•∑¢
 101          ////    GPIO_IE |= bIE_P3_1_LO;                                                     //P31µÕµÁ∆ΩªÚœ¬Ωµ—ÿ¥•∑
             -¢
 102          ////    GPIO_IE |= bIE_RXD0_LO;                                                     //RXD0µÕµÁ∆ΩªÚœ¬Ωµ—ÿ¥•
             -∑¢        
 103          //   IE_GPIO  = 1;                                                               //GPIO÷–∂œø™∆Ù
 104          //}
 105          
 106          //#ifdef GPIO_INTERRUPT
 107          ///*******************************************************************************
 108          //* Function Name  : GPIOInterrupt(void)
 109          //* Description    : GPIO ÷–∂œ∑˛ŒÒ≥Ã–Ú
 110          //*******************************************************************************/
 111          //void  GPIOInterrupt( void ) interrupt INT_NO_GPIO  using 1                      //GPIO÷–∂œ∑˛ŒÒ≥Ã–Ú, π”√ºƒ
             -¥Ê∆˜◊È1
C51 COMPILER V9.60.0.0   GPIO                                                              11/27/2020 11:16:59 PAGE 3   

 112          //{ 
 113          //#ifdef DE_PRINTF
 114          //      printf("GPIO_STATUS: %02x\n",(UINT16)(PIN_FUNC&bIO_INT_ACT));             
 115          //#endif
 116          //}
 117          //#endif
 118          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    178    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
